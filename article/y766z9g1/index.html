<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.158" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" type="image/png" href="https://theme-plume.vuejs.press/favicon-32x32.png"><title>容器基本操作 | My Profile Site</title><meta name="description" content=""><link rel="preload" href="/svip/assets/style-CKCZxjpy.css" as="style"><link rel="stylesheet" href="/svip/assets/style-CKCZxjpy.css"><link rel="modulepreload" href="/svip/assets/app-DHGoFUDo.js"><link rel="modulepreload" href="/svip/assets/index.html-rNhvbmkj.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-f61d6bc5><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b497cfb7></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-b497cfb7> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-f61d6bc5 data-v-19c66d84><div class="vp-navbar" vp-navbar data-v-19c66d84 data-v-0345dfc3><div class="wrapper" data-v-0345dfc3><div class="container" data-v-0345dfc3><div class="title" data-v-0345dfc3><div class="vp-navbar-title" data-v-0345dfc3 data-v-b110d2e8><a class="vp-link link no-icon title" href="/svip/" data-v-b110d2e8><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-b2de55dc><!--]--><!--[--><img class="vp-image light logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-b2de55dc><!--]--><!--]--><!--]--><span data-v-b110d2e8>My Profile Site</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-0345dfc3><div class="content-body" data-v-0345dfc3><!--[--><!--]--><div class="vp-navbar-search search" data-v-0345dfc3><div class="search-wrapper" data-v-d91c4957><!----><div id="local-search" data-v-d91c4957><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-d91c4957><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-0345dfc3 data-v-6a07eb3d><span id="main-nav-aria-label" class="visually-hidden" data-v-6a07eb3d>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/svip/" tabindex="0" data-v-6a07eb3d data-v-25ca9cc8><!--[--><!----><span data-v-25ca9cc8>首页</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/svip/blog/" tabindex="0" data-v-6a07eb3d data-v-25ca9cc8><!--[--><!----><span data-v-25ca9cc8>博客</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/svip/blog/tags/" tabindex="0" data-v-6a07eb3d data-v-25ca9cc8><!--[--><!----><span data-v-25ca9cc8>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/svip/blog/archives/" tabindex="0" data-v-6a07eb3d data-v-25ca9cc8><!--[--><!----><span data-v-25ca9cc8>归档</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-6a07eb3d data-v-d1532e0b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-d1532e0b><span class="text" data-v-d1532e0b><!----><!----><span data-v-d1532e0b>华为认证</span><!----><span class="vpi-chevron-down text-icon" data-v-d1532e0b></span></span></button><div class="menu" data-v-d1532e0b><div class="vp-menu" data-v-d1532e0b data-v-8eacf5ff><div class="items" data-v-8eacf5ff><!--[--><!--[--><div class="vp-menu-link" data-v-8eacf5ff data-v-9e3c777f><a class="vp-link link" href="/svip/huawei/" data-v-9e3c777f><!--[--><!----> 鸿蒙认证 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-6a07eb3d data-v-d1532e0b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-d1532e0b><span class="text" data-v-d1532e0b><!----><!----><span data-v-d1532e0b>容器云</span><!----><span class="vpi-chevron-down text-icon" data-v-d1532e0b></span></span></button><div class="menu" data-v-d1532e0b><div class="vp-menu" data-v-d1532e0b data-v-8eacf5ff><div class="items" data-v-8eacf5ff><!--[--><!--[--><div class="vp-menu-link" data-v-8eacf5ff data-v-9e3c777f><a class="vp-link link" href="/svip/docker/" data-v-9e3c777f><!--[--><!----> docker <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-6a07eb3d data-v-d1532e0b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-d1532e0b><span class="text" data-v-d1532e0b><!----><!----><span data-v-d1532e0b>笔记</span><!----><span class="vpi-chevron-down text-icon" data-v-d1532e0b></span></span></button><div class="menu" data-v-d1532e0b><div class="vp-menu" data-v-d1532e0b data-v-8eacf5ff><div class="items" data-v-8eacf5ff><!--[--><!--[--><div class="vp-menu-link" data-v-8eacf5ff data-v-9e3c777f><a class="vp-link link" href="/svip/demo/" data-v-9e3c777f><!--[--><!----> 示例 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-0345dfc3 data-v-cefab882><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-cefab882 data-v-05513755 data-v-82edb1ae><span class="check" data-v-82edb1ae><span class="icon" data-v-82edb1ae><!--[--><span class="vpi-sun sun" data-v-05513755></span><span class="vpi-moon moon" data-v-05513755></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-0345dfc3 data-v-dbf383d5 data-v-b7b5dbd7><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-b7b5dbd7 data-v-e9e6c0d0><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-0345dfc3 data-v-cbde1916 data-v-d1532e0b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d1532e0b><span class="vpi-more-horizontal icon" data-v-d1532e0b></span></button><div class="menu" data-v-d1532e0b><div class="vp-menu" data-v-d1532e0b data-v-8eacf5ff><!----><!--[--><!--[--><!----><div class="group" data-v-cbde1916><div class="item appearance" data-v-cbde1916><p class="label" data-v-cbde1916>外观</p><div class="appearance-action" data-v-cbde1916><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-cbde1916 data-v-05513755 data-v-82edb1ae><span class="check" data-v-82edb1ae><span class="icon" data-v-82edb1ae><!--[--><span class="vpi-sun sun" data-v-05513755></span><span class="vpi-moon moon" data-v-05513755></span><!--]--></span></span></button></div></div></div><div class="group" data-v-cbde1916><div class="item social-links" data-v-cbde1916><div class="vp-social-links social-links-list" data-v-cbde1916 data-v-b7b5dbd7><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-b7b5dbd7 data-v-e9e6c0d0><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-0345dfc3 data-v-448c276c><span class="container" data-v-448c276c><span class="top" data-v-448c276c></span><span class="middle" data-v-448c276c></span><span class="bottom" data-v-448c276c></span></span></button></div></div></div></div><div class="divider" data-v-0345dfc3><div class="divider-line" data-v-0345dfc3></div></div></div><!----></header><!----><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-f61d6bc5 data-v-d5a071d2><div class="vp-doc-container has-aside" data-v-d5a071d2 data-v-dbaebc2d><!--[--><!--]--><div class="container" data-v-dbaebc2d><div class="aside" vp-outline data-v-dbaebc2d><div class="aside-curtain" data-v-dbaebc2d></div><div class="aside-container" data-v-dbaebc2d><div class="aside-content" data-v-dbaebc2d><div class="vp-doc-aside" data-v-dbaebc2d data-v-1e755613><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-1e755613 data-v-4a7cc86c><div class="content" data-v-4a7cc86c><div class="outline-marker" data-v-4a7cc86c></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-4a7cc86c><span data-v-4a7cc86c>此页内容</span><span class="vpi-print icon" data-v-4a7cc86c></span></div><ul class="root" data-v-4a7cc86c data-v-9ca2a8ec><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-1e755613></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-dbaebc2d><div class="content-container" data-v-dbaebc2d><!--[--><!--]--><main class="main" data-v-dbaebc2d><!----><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-0982c35f>容器基本操作 <!----></h1><div class="vp-doc-meta" data-v-0982c35f><!--[--><!--]--><p class="reading-time" data-v-0982c35f><span class="vpi-books icon" data-v-0982c35f></span><span data-v-0982c35f>约 3776 字</span><span data-v-0982c35f>大约 13 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-0982c35f><span class="vpi-clock icon" data-v-0982c35f></span><span data-v-0982c35f>2025-08-15</span></p></div><!--]--><!--[--><!--]--><div class="_article_y766z9g1_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-dbaebc2d><!--[--><!--]--><div data-v-dbaebc2d><h2 id="_1-容器基本操作" tabindex="-1"><a class="header-anchor" href="#_1-容器基本操作"><span>1.容器基本操作</span></a></h2><p>1.查看容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker ps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看当前docker引擎中<strong>正在运行的容器</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE        COMMAND             CREATED          STATUS          PORTS      NAMES</span></span>
<span class="line"><span>65581914eb04   tomcat:8.0   &quot;catalina.sh run&quot;   2 minutes ago    Up 2 minutes    8080/tcp  infallible_lewin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说明：</p><p>CONTAINER ID：<strong>容器ID</strong></p><p>IMAGE：基于指定镜像</p><p>COMMAND：容器内启动服务命令</p><p>CREATED：容器创建时间</p><p>STATUS：容器状态</p><p>PORTS：<strong>容器服务监听的端口</strong></p><p>NAMES：<strong>容器名称</strong></p><p>2.运行容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker run 镜像名|镜像ID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>a.简单运行</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker pull tomcat:8.0</span></span>
<span class="line"><span>8.0: Pulling from library/tomcat</span></span>
<span class="line"><span>f189db1b88b3: Pull complete </span></span>
<span class="line"><span>3d06cf2f1b5e: Pull complete </span></span>
<span class="line"><span>edd0da9e3091: Pull complete </span></span>
<span class="line"><span>eb7768aae14e: Pull complete </span></span>
<span class="line"><span>e2780f585e0f: Pull complete </span></span>
<span class="line"><span>e5ed720afeba: Pull complete </span></span>
<span class="line"><span>d9e134700cfc: Pull complete </span></span>
<span class="line"><span>e4804b33d02a: Pull complete </span></span>
<span class="line"><span>b9df0c24315e: Pull complete </span></span>
<span class="line"><span>49fdae8eaa20: Pull complete </span></span>
<span class="line"><span>1aea3d9a32e6: Pull complete </span></span>
<span class="line"><span>Digest: sha256:8ecb10948deb32c34aeadf7bf95d12a93fbd3527911fa629c1a3e7823b89ce6f</span></span>
<span class="line"><span>Status: Downloaded newer image for tomcat:8.0</span></span>
<span class="line"><span>docker.io/library/tomcat:8.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>简单运行tomcat镜像</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run tomcat:8.0</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/8.0.53</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Jun 29 2018 14:42:45 UTC</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.0.53.0</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Linux</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            6.5.0-44-generic</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             /usr/lib/jvm/java-7-openjdk-amd64/jre</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.766 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.7.0_181-b01</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.766 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corporation</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.767 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /usr/local/tomcat</span></span>
<span class="line"><span>21-Jul-2024 02:23:10.767 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         /usr/local/tomcat</span></span>
<span class="line"><span>......</span></span>
<span class="line"><span>21-Jul-2024 02:23:12.340 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-apr-8080&quot;]</span></span>
<span class="line"><span>21-Jul-2024 02:23:12.450 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;ajp-apr-8009&quot;]</span></span>
<span class="line"><span>21-Jul-2024 02:23:12.456 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 1550 ms</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://192.168.6.136:8080/</p><p>访问不了tomcat</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#查看防火墙状态</span></span>
<span class="line"><span>root@hp-None:~# ufw status</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#关闭防火墙</span></span>
<span class="line"><span>root@hp-None:~# ufw disable</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>依旧访问不到。</p><p>这是由于容器是操作系统的隔离。</p><p>说明：直接运行容器这种方式，容器内无法直接访问。要想访问需建立容器与宿主机之间的映射</p><p>b.运行容器，同时设置容器与宿主机端口的映射关系</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker run -p 宿主机端口:容器端口 容器名称</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>运行tomcat容器，把tomcat8080端口映射到宿主机8080端口</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 8080:8080 tomcat:8.0</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.508 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/8.0.53</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.511 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Jun 29 2018 14:42:45 UTC</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.511 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.0.53.0</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.512 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Linux</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.512 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            6.5.0-44-generic</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.512 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.513 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             /usr/lib/jvm/java-7-openjdk-amd64/jre</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.513 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.7.0_181-b01</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.513 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corporation</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.514 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /usr/local/tomcat</span></span>
<span class="line"><span>21-Jul-2024 02:41:44.515 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         /usr/local/tomcat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://192.168.6.136:8080/</p><p>运行tomcat容器，把tomcat8080端口映射到宿主机8081端口</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 8081:8080 tomcat:8.0</span></span>
<span class="line"><span>21-Jul-2024 02:54:53.311 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/8.0.53</span></span>
<span class="line"><span>21-Jul-2024 02:54:53.313 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Jun 29 2018 14:42:45 UTC</span></span>
<span class="line"><span>21-Jul-2024 02:54:53.313 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.0.53.0</span></span>
<span class="line"><span>......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://192.168.6.136:8081/</p><p>c.后台运行</p><p>运行tomcat，端口映射，后台启动该服务 <strong>-d</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 8082:8080 -d tomcat:8.0</span></span>
<span class="line"><span>9dc6dfbfade9e2e5bb4471558720707e043451fed93ab670a3838b7a9a1c70db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>http://192.168.6.136:8082/</p><p>d.指定容器名称</p><p>运行tomcat，端口映射，后台启动该服务，指定容器名称 --name 容器名称</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 8083:8080 -d --name tomcat83 tomcat:8.0</span></span>
<span class="line"><span>......</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#查看容器</span></span>
<span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE        COMMAND             CREATED          STATUS          PORTS                                       NAMES</span></span>
<span class="line"><span>1399c47d6fbb   tomcat:8.0   &quot;catalina.sh run&quot;   3 minutes ago    Up 3 minutes    0.0.0.0:8083-&gt;8080/tcp, :::8083-&gt;8080/tcp   tomcat83</span></span>
<span class="line"><span>9dc6dfbfade9   tomcat:8.0   &quot;catalina.sh run&quot;   7 minutes ago    Up 7 minutes    0.0.0.0:8082-&gt;8080/tcp, :::8082-&gt;8080/tcp   stupefied_curran</span></span>
<span class="line"><span>0610383975cf   tomcat:8.0   &quot;catalina.sh run&quot;   12 minutes ago   Up 12 minutes   0.0.0.0:8081-&gt;8080/tcp, :::8081-&gt;8080/tcp   gifted_galileo</span></span>
<span class="line"><span>b8cc8cc2a275   tomcat:8.0   &quot;catalina.sh run&quot;   25 minutes ago   Up 25 minutes   0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   nostalgic_cerf</span></span>
<span class="line"><span>994739d5f2f5   tomcat:8.0   &quot;catalina.sh run&quot;   44 minutes ago   Up 44 minutes   8080/tcp                                    magical_archimedes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://192.168.6.136:8083/</p><p>3.停止容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker stop 容器名称|容器ID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>停止容器tomcat83</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker stop tomcat83</span></span>
<span class="line"><span>tomcat83</span></span>
<span class="line"><span></span></span>
<span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE        COMMAND             CREATED          STATUS          PORTS                                       NAMES</span></span>
<span class="line"><span>9dc6dfbfade9   tomcat:8.0   &quot;catalina.sh run&quot;   17 minutes ago   Up 17 minutes   0.0.0.0:8082-&gt;8080/tcp, :::8082-&gt;8080/tcp   stupefied_curran</span></span>
<span class="line"><span>0610383975cf   tomcat:8.0   &quot;catalina.sh run&quot;   22 minutes ago   Up 22 minutes   0.0.0.0:8081-&gt;8080/tcp, :::8081-&gt;8080/tcp   gifted_galileo</span></span>
<span class="line"><span>b8cc8cc2a275   tomcat:8.0   &quot;catalina.sh run&quot;   35 minutes ago   Up 35 minutes   0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   nostalgic_cerf</span></span>
<span class="line"><span>994739d5f2f5   tomcat:8.0   &quot;catalina.sh run&quot;   53 minutes ago   Up 53 minutes   8080/tcp                                    magical_archimedes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4.启动容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker start 容器名称|容器ID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动容器tomcat83</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker start tomcat83</span></span>
<span class="line"><span>tomcat83</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>重启tomcat83</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker restart tomcat83</span></span>
<span class="line"><span>tomcat83</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>5.暂停/恢复容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker pause|unpause 容器名称|容器ID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>示例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#暂停tomcat83</span></span>
<span class="line"><span>root@hp-None:~# docker pause tomcat83</span></span>
<span class="line"><span>tomcat83</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#恢复tomcat83</span></span>
<span class="line"><span>root@hp-None:~# docker unpause tomcat83</span></span>
<span class="line"><span>tomcat83</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6.查看所有容器，包括运行、停止的容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker ps -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>示例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker ps -a</span></span>
<span class="line"><span>CONTAINER ID   IMAGE          COMMAND             CREATED             STATUS                           PORTS                                       NAMES</span></span>
<span class="line"><span>1399c47d6fbb   tomcat:8.0     &quot;catalina.sh run&quot;   21 minutes ago      Exited (137) 13 seconds ago                                                  tomcat83</span></span>
<span class="line"><span>9dc6dfbfade9   tomcat:8.0     &quot;catalina.sh run&quot;   25 minutes ago      Up 25 minutes                    0.0.0.0:8082-&gt;8080/tcp, :::8082-&gt;8080/tcp   stupefied_curran</span></span>
<span class="line"><span>0610383975cf   tomcat:8.0     &quot;catalina.sh run&quot;   30 minutes ago      Up 30 minutes                    0.0.0.0:8081-&gt;8080/tcp, :::8081-&gt;8080/tcp   gifted_galileo</span></span>
<span class="line"><span>b8cc8cc2a275   tomcat:8.0     &quot;catalina.sh run&quot;   43 minutes ago      Up 43 minutes                    0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   nostalgic_cerf</span></span>
<span class="line"><span>994739d5f2f5   tomcat:8.0     &quot;catalina.sh run&quot;   About an hour ago   Up About an hour                 8080/tcp                                    magical_archimedes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7.查看容器日志</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker logs 容器名称|容器ID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看tomcat83日志</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker logs tomcat83</span></span>
<span class="line"><span>21-Jul-2024 03:04:19.888 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/8.0.53</span></span>
<span class="line"><span>21-Jul-2024 03:04:19.890 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Jun 29 2018 14:42:45 UTC</span></span>
<span class="line"><span>21-Jul-2024 03:04:19.890 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.0.53.0</span></span>
<span class="line"><span>......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实时监控容器内服务的日志：<strong>docker logs -f 容器名称|容器ID</strong></p><p>查看1399c47d6fbb容器的实时日志（可重启容器进行对比）</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker logs -f 1399c47d6fbb</span></span>
<span class="line"><span>......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>8.删除容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#删除已停止的容器</span></span>
<span class="line"><span>docker rm 容器名称|容器ID </span></span>
<span class="line"><span></span></span>
<span class="line"><span>#强制删除容器（即使运行的容器也能删除）</span></span>
<span class="line"><span>docker rm -f 容器名称|容器ID </span></span>
<span class="line"><span></span></span>
<span class="line"><span>#删除所有容器</span></span>
<span class="line"><span>docker rm -f $(docker ps -qa)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除正在运行的容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker rm tomcat83</span></span>
<span class="line"><span>Error response from daemon: You cannot remove a running container 1399c47d6fbbc42d89fdccad83e962aa5c03a0640e48df47ec49ce81d03da456. Stop the container before attempting removal or force remove</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>强制删除</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker rm -f tomcat83</span></span>
<span class="line"><span>tomcat83</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#查看正在运行的容器</span></span>
<span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE        COMMAND             CREATED       STATUS       PORTS                                       NAMES</span></span>
<span class="line"><span>9dc6dfbfade9   tomcat:8.0   &quot;catalina.sh run&quot;   2 hours ago   Up 2 hours   0.0.0.0:8082-&gt;8080/tcp, :::8082-&gt;8080/tcp   stupefied_curran</span></span>
<span class="line"><span>0610383975cf   tomcat:8.0   &quot;catalina.sh run&quot;   2 hours ago   Up 2 hours   0.0.0.0:8081-&gt;8080/tcp, :::8081-&gt;8080/tcp   gifted_galileo</span></span>
<span class="line"><span>b8cc8cc2a275   tomcat:8.0   &quot;catalina.sh run&quot;   2 hours ago   Up 2 hours   0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   nostalgic_cerf</span></span>
<span class="line"><span>994739d5f2f5   tomcat:8.0   &quot;catalina.sh run&quot;   2 hours ago   Up 2 hours   8080/tcp                                    magical_archimedes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除所有容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker rm -f $(docker ps -qa)</span></span>
<span class="line"><span>9dc6dfbfade9</span></span>
<span class="line"><span>0610383975cf</span></span>
<span class="line"><span>b8cc8cc2a275</span></span>
<span class="line"><span>994739d5f2f5</span></span>
<span class="line"><span>da8dc2930d7f</span></span>
<span class="line"><span>65581914eb04</span></span>
<span class="line"><span></span></span>
<span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span></span>
<span class="line"><span>root@hp-None:~# docker ps -a</span></span>
<span class="line"><span>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>9.进入容器内部（重点）</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker exec -it 容器名称|容器ID bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>-it:交互模式</p><p>bash:与容器中的bash进行交互</p><p>示例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker pull tomcat:8.0</span></span>
<span class="line"><span>8.0: Pulling from library/tomcat</span></span>
<span class="line"><span>f189db1b88b3: Pull complete </span></span>
<span class="line"><span>3d06cf2f1b5e: Pull complete </span></span>
<span class="line"><span>edd0da9e3091: Pull complete </span></span>
<span class="line"><span>eb7768aae14e: Pull complete </span></span>
<span class="line"><span>e2780f585e0f: Pull complete </span></span>
<span class="line"><span>e5ed720afeba: Pull complete </span></span>
<span class="line"><span>d9e134700cfc: Pull complete </span></span>
<span class="line"><span>e4804b33d02a: Pull complete </span></span>
<span class="line"><span>b9df0c24315e: Pull complete </span></span>
<span class="line"><span>49fdae8eaa20: Pull complete </span></span>
<span class="line"><span>1aea3d9a32e6: Pull complete </span></span>
<span class="line"><span>Digest: sha256:8ecb10948deb32c34aeadf7bf95d12a93fbd3527911fa629c1a3e7823b89ce6f</span></span>
<span class="line"><span>Status: Downloaded newer image for tomcat:8.0</span></span>
<span class="line"><span>docker.io/library/tomcat:8.0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#运行容器</span></span>
<span class="line"><span>root@hp-None:~# docker run -p 8081:8080 --name tomcat1 tomcat:8.0</span></span>
<span class="line"><span>......</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#查看容器</span></span>
<span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE        COMMAND             CREATED              STATUS              PORTS                                       NAMES</span></span>
<span class="line"><span>fae9d1e90ebe   tomcat:8.0   &quot;catalina.sh run&quot;   About a minute ago   Up About a minute   0.0.0.0:8081-&gt;8080/tcp, :::8081-&gt;8080/tcp   tomcat1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#进入容器内部</span></span>
<span class="line"><span>root@hp-None:~# docker exec -it tomcat1 bash</span></span>
<span class="line"><span>root@fae9d1e90ebe:/usr/local/tomcat# ls</span></span>
<span class="line"><span>LICENSE  NOTICE  RELEASE-NOTES  RUNNING.txt  bin  conf  include  lib  logs  native-jni-lib  temp  webapps  work</span></span>
<span class="line"><span>root@fae9d1e90ebe:/usr/local/tomcat# cd webapps/</span></span>
<span class="line"><span>root@fae9d1e90ebe:/usr/local/tomcat/webapps# ls</span></span>
<span class="line"><span>ROOT  docs  examples  host-manager  manager</span></span>
<span class="line"><span>root@fae9d1e90ebe:/usr/local/tomcat/webapps# cd ROOT/</span></span>
<span class="line"><span>root@fae9d1e90ebe:/usr/local/tomcat/webapps/ROOT# ls</span></span>
<span class="line"><span>RELEASE-NOTES.txt  asf-logo-wide.svg  bg-middle.png    bg-nav.png    favicon.ico  tomcat-power.gif  tomcat.gif  tomcat.svg</span></span>
<span class="line"><span>WEB-INF            bg-button.png      bg-nav-item.png  bg-upper.png  index.jsp    tomcat.css        tomcat.png</span></span>
<span class="line"><span>root@fae9d1e90ebe:/usr/local/tomcat/webapps/ROOT# echo &#39;Hello Docker&#39; &gt; index.jsp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://192.168.6.136:8081/</p><p>退出容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@fae9d1e90ebe:/usr/local/tomcat/webapps/ROOT# exit</span></span>
<span class="line"><span>exit</span></span>
<span class="line"><span>root@hp-None:~#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[思考：修改了容器的内容，镜像的内容会不会跟着修改]</p><p>10.容器与宿主机之间文件拷贝</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker cp 容器名称|容器ID 容器文件或目录 宿主机指定目录</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>把tomcat1容器/usr/local/tomcat/RUNNING.txt拷贝到宿主机的root目录下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker cp tomcat1:/usr/local/tomcat/RUNNING.txt /root</span></span>
<span class="line"><span>Successfully copied 17.9kB to /root</span></span>
<span class="line"><span>root@hp-None:~# ls</span></span>
<span class="line"><span>RUNNING.txt  snap</span></span>
<span class="line"><span>root@hp-None:~# cat RUNNING.txt</span></span>
<span class="line"><span>......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把宿主机root/abc.txt拷贝到tomcat1容器/usr/local/tomcat/下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker cp abc.txt  tomcat1:/usr/local/tomcat/</span></span>
<span class="line"><span>Successfully copied 2.05kB to tomcat1:/usr/local/tomcat/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>【如何部署web项目（war项目）】</p><p>1）使用filezilla.exe上传hp目录到root目录下</p><p>2）拷贝hp目录到tomcat1:/usr/local/tomcat/webapps/ROOT下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker cp hp tomcat1:/usr/local/tomcat/webapps/ROOT</span></span>
<span class="line"><span>Successfully copied 8.92MB to tomcat1:/usr/local/tomcat/webapps/ROOT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>3）运行测试</p><p>http://192.168.6.136:8081/hp/json/HOME_URL.json</p><h2 id="_2-操作tomcat实例" tabindex="-1"><a class="header-anchor" href="#_2-操作tomcat实例"><span>2.操作Tomcat实例</span></a></h2><p>在Ubuntu系统中，使用Docker完成以下操作：</p><ol><li><strong>部署Tomcat容器</strong>：拉取官方Tomcat镜像，将容器的<code>8080</code>端口映射到宿主机的<code>9009</code>端口，以守护进程（后台）模式启动，并指定容器名称为<code>tomcat1</code>；</li><li><strong>访问Tomcat服务</strong>：通过浏览器访问宿主机的<code>9009</code>端口，验证Tomcat默认页面是否加载成功；</li><li>管理容器生命周期： <ul><li>停止<code>tomcat1</code>容器；</li><li>查看所有容器（包括运行中和已停止的）；</li><li>查看<code>tomcat1</code>容器的日志；</li><li>进入tomcat1容器内部，修改页面显示内容为“Hello Tomcat!”；</li><li>强制删除<code>tomcat1</code>容器；</li><li>清理其他残留的Tomcat容器（如有）。</li></ul></li></ol><p>实施步骤如下所示。</p><p>（1）拉取tomcat8.0</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker pull tomcat:8.0</span></span>
<span class="line"><span>8.0: Pulling from library/tomcat</span></span>
<span class="line"><span>……</span></span>
<span class="line"><span>Digest: sha256:8ecb10948deb32c34aeadf7bf95d12a93fbd3527911fa629c1a3e7823b89ce6f</span></span>
<span class="line"><span>Status: Downloaded newer image for tomcat:8.0</span></span>
<span class="line"><span>docker.io/library/tomcat:8.0</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看tomcat镜像</span></span>
<span class="line"><span></span></span>
<span class="line"><span>root@hp-None:~# docker images|grep tomcat</span></span>
<span class="line"><span>tomcat        9.0       7e1d2500bd13   3 weeks ago     469MB</span></span>
<span class="line"><span>tomcat        8.5       0a2249be3d31   16 months ago   456MB</span></span>
<span class="line"><span>tomcat        8.0       ef6a7c98d192   6 years ago     356MB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（2）将容器的<code>8080</code>端口映射到宿主机的<code>9009</code>端口，以守护进程（后台）模式启动，并指定容器名称为<code>tomcat1</code>；</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# root@hp-docker:~# docker run -p 9009:8080 -d --name tomcat1 tomcat:8.0</span></span>
<span class="line"><span>a29057dc2b0b5a89db513f077b16726404a3cae80206d6c038d6b3317d29fc41</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>使用浏览器访问：</p><p>http://192.168.6.136:9009/</p><p>（3）停止tomcat1</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker stop tomcat1</span></span>
<span class="line"><span>tomcat1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>刷新浏览器。</p><p>（4）查看所有容器（包括运行中和已停止的）；</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker ps -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>（5）查看<code>tomcat1</code>容器的日志；</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker logs tomcat1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>（6）进入tomcat1容器内部，修改页面显示内容为“Hello Tomcat!”；</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span># 重启tomcat1</span></span>
<span class="line"><span>root@hp-None:~# docker restart tomcat1</span></span>
<span class="line"><span>tomcat1</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 进入tomcat1</span></span>
<span class="line"><span>root@hp-docker:~# docker exec -it tomcat1 bash</span></span>
<span class="line"><span>root@a29057dc2b0b:/usr/local/tomcat# ls</span></span>
<span class="line"><span>LICENSE  NOTICE  RELEASE-NOTES  RUNNING.txt  bin  conf  include  lib  logs  native-jni-lib  temp  webapps  work</span></span>
<span class="line"><span>root@a29057dc2b0b:/usr/local/tomcat# cd webapps/</span></span>
<span class="line"><span>root@a29057dc2b0b:/usr/local/tomcat/webapps# ls</span></span>
<span class="line"><span>ROOT  docs  examples  host-manager  manager</span></span>
<span class="line"><span>root@a29057dc2b0b:/usr/local/tomcat/webapps# cd ROOT/</span></span>
<span class="line"><span>root@a29057dc2b0b:/usr/local/tomcat/webapps/ROOT# ls</span></span>
<span class="line"><span>RELEASE-NOTES.txt  asf-logo-wide.svg  bg-middle.png    bg-nav.png    favicon.ico  tomcat-power.gif  tomcat.gif  tomcat.svg</span></span>
<span class="line"><span>WEB-INF            bg-button.png      bg-nav-item.png  bg-upper.png  index.jsp    tomcat.css        tomcat.png</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 修改内容</span></span>
<span class="line"><span>root@a29057dc2b0b:/usr/local/tomcat/webapps/ROOT# echo &#39;Hello Tomcat&#39; &gt; index.jsp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>刷新浏览器。</p><p>（7）强制删除<code>tomcat1</code>容器；</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# service docker restart</span></span>
<span class="line"><span></span></span>
<span class="line"><span>docker rm -f $(docker ps -qa)</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 退出容器</span></span>
<span class="line"><span>root@a29057dc2b0b:/usr/local/tomcat/webapps/ROOT# exit</span></span>
<span class="line"><span>exit</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 强制删除tomcat1</span></span>
<span class="line"><span>root@hp-None:~# docker rm -f tomcat1</span></span>
<span class="line"><span>tomcat1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-运行mysql服务" tabindex="-1"><a class="header-anchor" href="#_3-运行mysql服务"><span>3.运行MySQL服务</span></a></h2><p>本任务以操作MySQL8.0为例来巩固容器操作命令，实施步骤如下所示。</p><p>（1）拉取mysql8.0</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker pull mysql:8.0</span></span>
<span class="line"><span>8.0: Pulling from library/mysql</span></span>
<span class="line"><span>72a69066d2fe: Pull complete </span></span>
<span class="line"><span>93619dbc5b36: Pull complete </span></span>
<span class="line"><span>99da31dd6142: Pull complete </span></span>
<span class="line"><span>626033c43d70: Pull complete </span></span>
<span class="line"><span>37d5d7efb64e: Pull complete </span></span>
<span class="line"><span>ac563158d721: Pull complete </span></span>
<span class="line"><span>d2ba16033dad: Pull complete </span></span>
<span class="line"><span>688ba7d5c01a: Pull complete </span></span>
<span class="line"><span>00e060b6d11d: Pull complete </span></span>
<span class="line"><span>1c04857f594f: Pull complete </span></span>
<span class="line"><span>4d7cfa90e6ea: Pull complete </span></span>
<span class="line"><span>e0431212d27d: Pull complete </span></span>
<span class="line"><span>Digest: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738bd5b8e7709</span></span>
<span class="line"><span>Status: Downloaded newer image for mysql:8.0</span></span>
<span class="line"><span>docker.io/library/mysql:8.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（2）运行mysql</p><p>启动mysql，开放端口映射3306，指定root用户密码 -e（environment：环境），后台运行，指定名称</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Hp.123456 -d --name mysql8 mysql:8.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>示例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Hp.123456 -d --name mysql8 mysql:8.0</span></span>
<span class="line"><span>6c616bedd441de3137b119471fdc566867732d3bd6cce628cf760bd6ea8617d5</span></span>
<span class="line"><span></span></span>
<span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE        COMMAND                   CREATED          STATUS          PORTS                                                  NAMES</span></span>
<span class="line"><span>6c616bedd441   mysql:8.0    &quot;docker-entrypoint.s…&quot;   35 seconds ago   Up 34 seconds   0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   mysql8</span></span>
<span class="line"><span>fae9d1e90ebe   tomcat:8.0   &quot;catalina.sh run&quot;         5 hours ago      Up 5 hours      0.0.0.0:8081-&gt;8080/tcp, :::8081-&gt;8080/tcp              tomcat1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#查看日志，看是否启动完成</span></span>
<span class="line"><span>root@hp-None:~# docker logs 6c616bedd441</span></span>
<span class="line"><span>2024-07-21 12:41:35+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started.</span></span>
<span class="line"><span>2024-07-21 12:41:35+00:00 [Note] [Entrypoint]: Switching to dedicated user &#39;mysql&#39;</span></span>
<span class="line"><span>2024-07-21 12:41:35+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started.</span></span>
<span class="line"><span>2024-07-21 12:41:35+00:00 [Note] [Entrypoint]: Initializing database files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（3）使用Navicat连接</p><p>（4）重启容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# systemctl restart docker</span></span>
<span class="line"><span>root@docker:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动容器后，发现mysql服务停止了。我们希望重启容器后，mysql服务自动启动。</p><p>（5）设置总是运行</p><p>启动mysql，开放端口映射3306，指定root用户密码 -e（environment：环境），后台运行，指定名称，总是运行--restart=always</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Hp.123456 -d --name mysql8-01 --restart=always mysql:8.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Hp.123456 -d --name mysql8-01 --restart=always mysql:8.0</span></span>
<span class="line"><span>fefc89a580dcf53ae0652f514b27be4fc36d0f7f6cff4796d97187a19b6105b7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>再启动容器，发现mysql在运行。</p><p>（6）使用数据卷持久化数据到宿主机</p><p>启动mysql，开放端口映射3306，指定root用户密码 -e（environment：环境），后台运行，指定名称，总是运行--restart=always，<strong>数据卷持久化数据到宿主机</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Hp.123456 -d --name mysql8-02 --restart=always -v /root/data:/var/lib/mysql mysql:8.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>-v：数据卷挂载</p><p>/root/data：宿主机目录，可以不存在，会自动创建</p><p>/var/lib/mysql：容器指定目录。</p><p>先删除所有容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker rm -f $(docker ps -qa)</span></span>
<span class="line"><span>722e56814f3d</span></span>
<span class="line"><span>6c616bedd441</span></span>
<span class="line"><span>8ae76aacec5a</span></span>
<span class="line"><span>fae9d1e90ebe</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Hp.123456 -d --name mysql8-02 --restart=always -v /root/data:/var/lib/mysql mysql:8.0</span></span>
<span class="line"><span>67bd852b6d61a673fe163946ff51b8f1dad10099d6fe70e253a3414654e5eb2b</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看data目录</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# ls</span></span>
<span class="line"><span>abc.txt  data  hp  RUNNING.txt  snap</span></span>
<span class="line"><span>root@hp-None:~# cd data/</span></span>
<span class="line"><span>root@hp-None:~/data# ls</span></span>
<span class="line"><span> auto.cnf        binlog.index   client-cert.pem     &#39;#ib_16384_1.dblwr&#39;   ib_logfile0  &#39;#innodb_temp&#39;   performance_schema   server-cert.pem   undo_001</span></span>
<span class="line"><span> binlog.000001   ca-key.pem     client-key.pem       ib_buffer_pool       ib_logfile1   mysql           private_key.pem      server-key.pem    undo_002</span></span>
<span class="line"><span> binlog.000002   ca.pem        &#39;#ib_16384_0.dblwr&#39;   ibdata1              ibtmp1        mysql.ibd       public_key.pem       sys</span></span>
<span class="line"><span>root@hp-None:~/data#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用Navicat创建数据库，比如test数据库，查看data目录，可以看到创建的test数据库。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~/data# ls</span></span>
<span class="line"><span> auto.cnf        binlog.index   client-cert.pem     &#39;#ib_16384_1.dblwr&#39;   ib_logfile0  &#39;#innodb_temp&#39;   performance_schema   server-cert.pem   test</span></span>
<span class="line"><span> binlog.000001   ca-key.pem     client-key.pem       ib_buffer_pool       ib_logfile1   mysql           private_key.pem      server-key.pem    undo_001</span></span>
<span class="line"><span> binlog.000002   ca.pem        &#39;#ib_16384_0.dblwr&#39;   ibdata1              ibtmp1        mysql.ibd       public_key.pem       sys               undo_002</span></span>
<span class="line"><span>root@hp-None:~/data#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【思考题：现在删除数据库容器，数据库里的数据怎么恢复？】</p><h2 id="_4-运行nginx服务" tabindex="-1"><a class="header-anchor" href="#_4-运行nginx服务"><span>4.运行Nginx服务</span></a></h2><p>本任务以操作nginx为例来巩固容器操作命令，实施步骤如下所示。</p><p>（1）拉取nginx</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#拉取nginx</span></span>
<span class="line"><span>root@hp-None:~# docker pull nginx:1.19.10</span></span>
<span class="line"><span>1.19.10: Pulling from library/nginx</span></span>
<span class="line"><span>69692152171a: Pull complete </span></span>
<span class="line"><span>49f7d34d62c1: Pull complete </span></span>
<span class="line"><span>5f97dc5d71ab: Pull complete </span></span>
<span class="line"><span>cfcd0711b93a: Pull complete </span></span>
<span class="line"><span>be6172d7651b: Pull complete </span></span>
<span class="line"><span>de9813870342: Pull complete </span></span>
<span class="line"><span>Digest: sha256:df13abe416e37eb3db4722840dd479b00ba193ac6606e7902331dcea50f4f1f2</span></span>
<span class="line"><span>Status: Downloaded newer image for nginx:1.19.10</span></span>
<span class="line"><span>docker.io/library/nginx:1.19.10</span></span>
<span class="line"><span>#查看镜像</span></span>
<span class="line"><span>root@hp-None:~# docker images</span></span>
<span class="line"><span>REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span></span>
<span class="line"><span>redis        latest    7614ae9453d1   2 years ago   113MB</span></span>
<span class="line"><span>mysql        8.0       3218b38490ce   2 years ago   516MB</span></span>
<span class="line"><span>nginx        1.19.10   f0b8a9a54136   3 years ago   133MB</span></span>
<span class="line"><span>redis        6.0.9     6060df96cef3   3 years ago   104MB</span></span>
<span class="line"><span>tomcat       8.0       ef6a7c98d192   5 years ago   356MB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（2）启动nginx</p><p>启动nginx，映射端口，后台启动，指定名称，总是启动</p><p>docker run -p 80:80 -d --name nginx01 --restart=always nginx:1.19.10</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker run -p 80:80 -d  --name nginx01 --restart=always nginx:1.19.10</span></span>
<span class="line"><span>69e7dd30193983a7d631423ed4dec2b2e0231a4601b97add2d556d2f1d0bf5d3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>浏览器访问：http://192.168.6.136/</p><p>修改页面内容</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#进入容器，查找index.html</span></span>
<span class="line"><span>root@hp-None:~# docker exec -it 69e bash</span></span>
<span class="line"><span>root@69e7dd301939:/# find / -name index.html</span></span>
<span class="line"><span>find: &#39;/proc/31/task/31/fdinfo&#39;: Permission denied</span></span>
<span class="line"><span>find: &#39;/proc/31/map_files&#39;: Permission denied</span></span>
<span class="line"><span>find: &#39;/proc/31/fdinfo&#39;: Permission denied</span></span>
<span class="line"><span>/usr/share/nginx/html/index.html</span></span>
<span class="line"><span></span></span>
<span class="line"><span>root@69e7dd301939:/# cd /usr/share/nginx/html/</span></span>
<span class="line"><span>root@69e7dd301939:/usr/share/nginx/html# ls</span></span>
<span class="line"><span>50x.html  index.html</span></span>
<span class="line"><span>root@69e7dd301939:/usr/share/nginx/html# echo &quot;Hello Nginx&quot; &gt; index.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>刷新浏览器</p><p>http://192.168.6.136/</p><p>（3）启动nginx，加载配置文件（nginx更多地作为负载均衡和反向代理）</p><p>启动nginx，映射端口，后台启动，指定名称，总是启动，加载nginx配置文件 -v 容器(/etc/nginx/nginx.conf)</p><p>docker run -p 80:80 -d --name nginx01 --restart=always -v /root/nginxconfig/nginx.conf:/etc/nginx/nginx.conf nginx:1.19.10</p><p>查找nginx.conf</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@69e7dd301939:/# find / -name nginx.conf</span></span>
<span class="line"><span>find: &#39;/proc/31/task/31/fdinfo&#39;: Permission denied</span></span>
<span class="line"><span>find: &#39;/proc/31/map_files&#39;: Permission denied</span></span>
<span class="line"><span>find: &#39;/proc/31/fdinfo&#39;: Permission denied</span></span>
<span class="line"><span>/etc/nginx/nginx.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>拷贝容器/etc/nginx/nginx.conf到宿主机的/root/nginxconfig/</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# mkdir nginxconfig</span></span>
<span class="line"><span>root@hp-None:~# docker cp 69e7dd301939:/etc/nginx/nginx.conf /root/nginxconfig/</span></span>
<span class="line"><span>Successfully copied 2.56kB to /root/nginxconfig/</span></span>
<span class="line"><span>root@hp-None:~/nginxconfig# ls</span></span>
<span class="line"><span>nginx.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行容器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@hp-None:~# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE           COMMAND                   CREATED             STATUS             PORTS                                                  NAMES</span></span>
<span class="line"><span>69e7dd301939   nginx:1.19.10   &quot;/docker-entrypoint.…&quot;   About an hour ago   Up About an hour   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp                      nginx01</span></span>
<span class="line"><span>834a021d5e54   redis:6.0.9     &quot;docker-entrypoint.s…&quot;   3 hours ago         Up 3 hours         0.0.0.0:6379-&gt;6379/tcp, :::6379-&gt;6379/tcp              redis03</span></span>
<span class="line"><span>02e6eb10762f   mysql:8.0       &quot;docker-entrypoint.s…&quot;   36 hours ago        Up 36 hours        0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   mysql8-02</span></span>
<span class="line"><span>#删除前面的nginx容器</span></span>
<span class="line"><span>root@hp-None:~# docker rm -f 69e7dd301939</span></span>
<span class="line"><span>69e7dd301939</span></span>
<span class="line"><span>#运行nginx容器</span></span>
<span class="line"><span>root@hp-None:~# docker run -p 80:80 -d  --name nginx01 --restart=always -v /root/nginxconfig/nginx.conf:/etc/nginx/nginx.conf nginx:1.19.10</span></span>
<span class="line"><span>cc2fef6311e91097309c2d1f1691ea580137d487d0c04201831eb74d1d69b562</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>浏览器查看。</p><p>修改nginx.conf配置文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>root@docker:~# cd nginxconfig/</span></span>
<span class="line"><span>root@docker:~/nginxconfig# ls</span></span>
<span class="line"><span>nginx.conf</span></span>
<span class="line"><span>root@docker:~/nginxconfig# nano nginx.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>#运行nginx容器</span></span>
<span class="line"><span>root@hp-None:~# docker run -p 8099:8088 -d  --name nginx02 --restart=always -v /root/nginxconfig/nginx.conf:/etc/nginx/nginx.conf nginx:1.19.10</span></span>
<span class="line"><span>d53a155b1dd150f6020ede7bcd89140a2d06b11fcdc1a614a41f64f03959b1b8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>浏览器访问：http://192.168.6.136:8099/</p></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-dbaebc2d data-v-192d4ab7><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-192d4ab7><span class="contributors-label" data-v-192d4ab7>贡献者: </span><span class="contributors-info" data-v-192d4ab7><!--[--><!--[--><span class="contributor" data-v-192d4ab7>elvishehai521@163.com</span><!----><!--]--><!--]--></span></div><!----></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-f61d6bc5 data-v-05500dab><span class="percent" data-allow-mismatch data-v-05500dab>0%</span><span class="show icon vpi-back-to-top" data-v-05500dab></span><svg aria-hidden="true" data-v-05500dab><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-05500dab></circle></svg></button><footer class="vp-footer" vp-footer data-v-f61d6bc5 data-v-17080dc3><!--[--><div class="container" data-v-17080dc3><p class="message" data-v-17080dc3>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/svip/assets/app-DHGoFUDo.js" defer></script></body></html>